(this["webpackJsonp2048-levelup"]=this["webpackJsonp2048-levelup"]||[]).push([[0],{12:function(e,t,i){},13:function(e,t,i){},14:function(e,t,i){"use strict";i.r(t);var s=i(1),o=i.n(s),n=i(5),r=i.n(n),l=i(6),a=i(3),c=i(4),u=function(e){for(var t=e.length,i=e[0].length,s=[],o=0;o<t;++o){s.push([]);for(var n=0;n<i;++n)s[o][n]=e[n][i-o-1]}return s},h=function(){function e(t,i,s){Object(a.a)(this,e),this.value=t||0,this.row=i||-1,this.column=s||-1,this.oldRow=-1,this.oldColumn=-1,this.markForDeletion=!1,this.mergedInto=null,this.id=this.id++||0}return Object(c.a)(e,[{key:"moveTo",value:function(e,t){this.oldRow=this.row,this.oldColumn=this.column,this.row=e,this.column=t}},{key:"isNew",value:function(){return-1===this.oldRow&&!this.mergedInto}},{key:"hasMoved",value:function(){return-1!==this.fromRow()&&(this.fromRow()!==this.toRow()||this.fromColumn()!==this.toColumn())||this.mergedInto}},{key:"fromRow",value:function(){return this.mergedInto?this.row:this.oldRow}},{key:"fromColumn",value:function(){return this.mergedInto?this.column:this.oldColumn}},{key:"toRow",value:function(){return this.mergedInto?this.mergedInto.row:this.row}},{key:"toColumn",value:function(){return this.mergedInto?this.mergedInto.column:this.column}}]),e}(),d=function(){function e(){Object(a.a)(this,e),this.tiles=[],this.cells=[],this.score=0,this.size=4,this.fourProbability=.1,this.deltaX=[-1,0,1,0],this.deltaY=[0,-1,0,1];for(var t=0;t<this.size;++t)this.cells[t]=[this.addTile(),this.addTile(),this.addTile(),this.addTile()];this.addRandomTile(),this.addRandomTile(),this.setPositions(),this.won=!1}return Object(c.a)(e,[{key:"addTile",value:function(e){var t=new h(e);return this.tiles.push(t),t}},{key:"moveLeft",value:function(){for(var e=!1,t=0;t<this.size;++t){for(var i=this.cells[t].filter((function(e){return 0!==e.value})),s=[],o=0;o<this.size;++o){var n=i.length?i.shift():this.addTile();if(i.length>0&&i[0].value===n.value){var r=n;n=this.addTile(n.value),r.mergedInto=n;var l=i.shift();l.mergedInto=n,n.value+=l.value,this.score+=r.value+l.value}s[o]=n,this.won|=2048===n.value,e|=n.value!==this.cells[t][o].value}this.cells[t]=s}return e}},{key:"setPositions",value:function(){this.cells.forEach((function(e,t){e.forEach((function(e,i){e.oldRow=e.row,e.oldColumn=e.column,e.row=t,e.column=i,e.markForDeletion=!1}))}))}},{key:"addRandomTile",value:function(){for(var e=[],t=0;t<this.size;++t)for(var i=0;i<this.size;++i)0===this.cells[t][i].value&&e.push({r:t,c:i});var s=e[~~(Math.random()*e.length)],o=Math.random()<this.fourProbability?4:2;this.cells[s.r][s.c]=this.addTile(o)}},{key:"move",value:function(e){this.clearOldTiles();for(var t=0;t<e;++t)this.cells=u(this.cells);for(var i=this.moveLeft(),s=e;s<4;++s)this.cells=u(this.cells);return i&&this.addRandomTile(),this.setPositions(),this}},{key:"clearOldTiles",value:function(){this.tiles=this.tiles.filter((function(e){return!1===e.markForDeletion})),this.tiles.forEach((function(e){e.markForDeletion=!0}))}},{key:"hasWon",value:function(){return this.won}},{key:"hasLost",value:function(){for(var e=!1,t=0;t<this.size;++t)for(var i=0;i<this.size;++i){e|=0===this.cells[t][i].value;for(var s=0;s<4;++s){var o=t+this.deltaX[s],n=i+this.deltaY[s];o<0||o>=this.size||n<0||n>=this.size||(e|=this.cells[t][i].value===this.cells[o][n].value)}}return!e}}]),e}();var v=i(0),f=function(){return Object(v.jsx)("div",{className:"cell"})},m=i.p+"static/media/game-over.7223586a.gif",j=function(e){var t=e.onRestart,i=e.board;return i.hasWon()?Object(v.jsx)("div",{className:"tile2048"}):i.hasLost()?Object(v.jsx)("div",{className:"gameOver",onClick:t,children:Object(v.jsx)("img",{src:m,alt:"Try Again",style:{background:"white",width:"100%",height:"100%",cursor:"pointer"}})}):null},b=function(e){var t=e.tile,i=[" tile "];i.push("tile"+t.value),t.mergedInto||i.push("position_".concat(t.row,"_").concat(t.column)),t.mergedInto&&i.push("merged"),t.isNew()&&i.push("new"),t.hasMoved()&&(i.push("row_from_".concat(t.fromRow(),"_to_").concat(t.toRow())),i.push("column_from_".concat(t.fromColumn(),"_to_").concat(t.toColumn())),i.push("isMoving"));var s=i.join(" ");return Object(v.jsx)("div",{className:s})},w=function(){var e=Object(s.useState)(new d),t=Object(l.a)(e,2),i=t[0],o=t[1];!function(e,t){var i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];Object(s.useEffect)((function(){return window.addEventListener(e,t,i),function(){window.removeEventListener(e,t,i)}}))}("keydown",(function(e){if(78===e.keyCode&&a(),!i.hasWon()&&!i.hasLost()&&e.keyCode>=37&&e.keyCode<=40){var t=e.keyCode-37,s=Object.assign(Object.create(Object.getPrototypeOf(i)),i).move(t);o(s)}}));var n=i.cells.map((function(e,t){return Object(v.jsx)("div",{children:e.map((function(e,s){return Object(v.jsx)(f,{},t*i.size+s)}))},t)})),r=i.tiles.filter((function(e){return 0!==e.value})).map((function(e,t){return Object(v.jsx)(b,{tile:e},t)})),a=function(){o(new d)};return Object(v.jsxs)("div",{children:[Object(v.jsxs)("div",{className:"details-box",children:[Object(v.jsx)("div",{className:"resetButton",onClick:a,children:"New Game"}),Object(v.jsx)("div",{className:"details-box",children:Object(v.jsxs)("div",{className:"score-box",children:[Object(v.jsx)("div",{className:"score-title",children:"Score"}),Object(v.jsx)("div",{className:"",children:i.score})]})})]}),Object(v.jsxs)("div",{className:"board",children:[n,r]}),Object(v.jsx)("div",{children:Object(v.jsx)(j,{onRestart:a,board:i})})]})};i(12),i(13);var O=function(){return Object(v.jsx)("div",{className:"App",children:Object(v.jsx)(w,{})})};r.a.render(Object(v.jsx)(o.a.StrictMode,{children:Object(v.jsx)(O,{})}),document.getElementById("root"))}},[[14,1,2]]]);
//# sourceMappingURL=main.077dbd87.chunk.js.map